#! /usr/bin/env ruby

require 'podgen'
require 'commander/import'

puts
puts
puts

program :name, 'podgen'
program :version, Podgen::VERSION
program :description, 'Podcast static site generator'


command :compile do |c|
  c.description = "Compiles the site"
  c.action do |args, options|
    Podgen.init
    Podgen.compile
  end
end

command :deploy do |c|
  c.description = "Deploys the site"
  c.action do |args, options|
    Podgen.init
    Podgen.deploy
  end
end

command :cd do |c|
  c.description = "Compiles then deploys the site"
  c.action do |args, options|
    Podgen.init
    Podgen.compile
    Podgen.deploy
  end
end

command :new do |c|
  c.description = "Creates a blank podgen site with some defaults"
  c.syntax = "new [sitename]"
  c.action do |args, options|
    if args[0].nil? or !(args[0].is_a? String)
      puts "Syntax: podgen new [sitename]"
      exit!
    end
    Podgen::new_site(args[0])
  end
end

command :update_templates do |c|
  c.description = "Sets template files to current default. DESTRUCTIVE!"
  c.action do |args, options|
    Podgen.init
    Podgen::update_templates
  end
end
